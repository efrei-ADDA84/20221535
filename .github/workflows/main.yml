name: "Transform Wrapper into API"
on: [push]

jobs:
  transform_wrapper:
    runs-on: ubuntu-latest
    permissions:
      checks: write
      contents: read
    steps:
    - uses: actions/checkout@v2
    # Étape pour exécuter le wrapper et générer des sorties
    - name: Execute Wrapper and Generate Outputs
      id: wrapper
      run: |
        # Votre commande pour exécuter le wrapper
        # Cette étape doit générer des sorties nécessaires pour votre contrôle

    # Étape pour créer le contrôle via l'action GitHub Checks
    - name: Create API Check
      uses: LouisBrunner/checks-action@v2.0.0
      if: always()
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        name: "Wrapper to API Conversion"
        conclusion: ${{ job.status }}
        output: |
          {
            "summary": "Wrapper successfully transformed into API",
            "output_details": "${{ steps.wrapper.outputs.details }}"
          }
